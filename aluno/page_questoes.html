<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>UFRGS - Prova de MatemÃ¡tica</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9fafc;
      color: #333;
    }

    header {
      background: linear-gradient(to right, #141E30, #243B55);
      color: white;
      padding: 15px 30px;
      font-size: 14px;
    }

    header h2 {
      margin-top: 5px;
      font-size: 18px;
    }

    .top-bar {
      background-color: #fff;
      border-bottom: 1px solid #ccc;
      padding: 10px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      flex-wrap: wrap;
    }

    .top-bar .left-info {
      display: flex;
      flex-direction: column;
      font-size: 13px;
      gap: 6px;
    }

    .top-bar .controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .tempo-box {
      background-color: #e7f0ff;
      color: #2563eb;
      padding: 6px 14px;
      border-radius: 6px;
      font-weight: 500;
      border: 1px solid #c3dcff;
    }

    .btn-finalizar {
      background-color: #ffe5e5;
      color: #d60000;
      font-weight: 500;
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    main {
      padding: 30px;
    }

    .breadcrumb {
      font-size: 13px;
      color: #666;
      margin-bottom: 10px;
    }

    .question-box {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 20px;
    }

    .question-text {
      margin-top: 10px;
      font-size: 15px;
    }

    .options {
      margin-top: 20px;
    }

    .options label {
      display: block;
      margin-bottom: 10px;
      font-size: 14px;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      width: fit-content;
    }

    .options input[type="radio"] {
      margin-right: 8px;
    }

    .bottom-nav .btn-responder {
      margin-top: 20px;
      background-color: #4285f4;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    .bottom-nav {
      margin-top: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
    }

    .bottom-nav select {
      padding: 5px;
    }

    .bottom-nav button {
      background-color: #e2e9f8;
      border: 1px solid #ccc;
      padding: 6px 10px;
      margin-left: 5px;
      border-radius: 5px;
      cursor: pointer;
    }

    .options label.selected {
      background-color: #dceeff;
      border-color: #4285f4;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <header>
    <div>InÃ­cio > Provas</div>
    <h2>Plataforma ODS4 - EducaÃ§Ã£o Personalizada</h2>
  </header>

  <div class="top-bar">
    <div class="left-info">
      <div><strong>Tempo nesta questÃ£o:</strong> 00:05:46</div>
      <div><strong>QuestÃµes respondidas:</strong> <span id="respondidas">0</span>/15</div>
    </div>
    <div class="controls">
      <div class="tempo-box">ðŸ›ˆ Tempo 00:26:36</div>
      <button class="icon-button" title="Tela cheia">ðŸ—–</button>
      <button class="icon-button" title="Modo escuro">ðŸŒ™</button>
      <button class="icon-button" title="Notas">ðŸ“„</button>
      <div class="font-size-box">
        <button title="Aumentar fonte">A+</button>
        <button title="Diminuir fonte">A-</button>
      </div>
      <button class="btn-finalizar" onclick="finalizar()">Finalizar Prova</button>
    </div>
  </div>

  <main>
    <div class="breadcrumb" id="breadcrumb"></div>

    <div class="question-box">
      <div class="question-text" id="pergunta"></div>
      <div class="options" id="alternativas"></div>

      <div class="bottom-nav">
        <button class="btn-responder" onclick="responder()">Responder</button>
        <div>Ir para a questÃ£o: 
          <select id="seletor" onchange="irParaQuestao(this.value)"></select>
        </div>
        <div>
          <button onclick="voltarQuestao()">&larr;</button>
          <button onclick="proximaQuestao()">&rarr;</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    const questoes = [
      {
        numero: "Q0001",
        texto: "Qual o valor de x na equaÃ§Ã£o 2x + 3 = 7?",
        alternativas: ["1", "2", "3", "4", "5"],
        correta: 1
      },
      {
        numero: "Q0002",
        texto: "Qual a soma da PG infinita de razÃ£o 1/2 cujo primeiro termo Ã© 4?",
        alternativas: ["2", "4", "6", "8", "10"],
        correta: 2
      }
    ];
  
    let questaoAtual = 0;
    let intervaloTempoGlobal;
    let intervaloTempoQuestao;
    let tempoTotal = parseInt(localStorage.getItem("tempo_total")) || 0;
    let tempoQuestaoAtual = 0;
    const respondidas = new Set();
  
    function formatarTempo(segundos) {
      const h = String(Math.floor(segundos / 3600)).padStart(2, '0');
      const m = String(Math.floor((segundos % 3600) / 60)).padStart(2, '0');
      const s = String(segundos % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }
  
    function iniciarTemporizadorGlobal() {
      const tempoBox = document.querySelector(".tempo-box");
      tempoBox.innerText = `ðŸ›ˆ Tempo ${formatarTempo(tempoTotal)}`;
  
      intervaloTempoGlobal = setInterval(() => {
        tempoTotal++;
        localStorage.setItem("tempo_total", tempoTotal);
        tempoBox.innerText = `ðŸ›ˆ Tempo ${formatarTempo(tempoTotal)}`;
      }, 1000);
    }
  
    function carregarQuestao() {
      clearInterval(intervaloTempoQuestao);
      tempoQuestaoAtual = parseInt(localStorage.getItem(`tempo_questao_${questaoAtual}`)) || 0;
  
      const q = questoes[questaoAtual];
      document.getElementById('breadcrumb').innerText = `${q.numero} | MatemÃ¡tica > UFRGS 2024`;
      document.getElementById('pergunta').innerText = q.texto;
  
      const altContainer = document.getElementById('alternativas');
      altContainer.innerHTML = '';
      q.alternativas.forEach((alt, i) => {
        const letra = String.fromCharCode(65 + i);
        const id = `alt-${i}`;
  
        const label = document.createElement('label');
        label.setAttribute('for', id);
        label.innerHTML = `<input type="radio" name="opcao" id="${id}" value="${i}"> ${letra}) ${alt}`;
  
        label.addEventListener('click', () => {
          document.querySelectorAll('.options label').forEach(l => l.classList.remove('selected'));
          label.classList.add('selected');
        });
  
        altContainer.appendChild(label);
      });
  
      // Restaurar resposta
      const respostaSalva = localStorage.getItem(`resposta_${questaoAtual}`);
      if (respostaSalva !== null) {
        const radio = document.querySelector(`input[name="opcao"][value="${respostaSalva}"]`);
        if (radio) {
          radio.checked = true;
          radio.parentElement.classList.add('selected');
          respondidas.add(questaoAtual);
          document.getElementById("respondidas").innerText = respondidas.size;
        }
      }
  
      // BotÃ£o limpar
      const limparBtn = document.createElement("button");
      limparBtn.textContent = "Limpar resposta";
      limparBtn.className = "btn-responder";
      limparBtn.style.marginTop = "10px";
      limparBtn.onclick = limparResposta;
      altContainer.appendChild(limparBtn);
  
      // Atualiza seletor
      const seletor = document.getElementById('seletor');
      if (seletor.options.length !== questoes.length) {
        seletor.innerHTML = questoes.map((_, i) => `<option value="${i}">${i + 1}</option>`).join('');
      }
      seletor.value = questaoAtual;
  
      // Tempo individual da questÃ£o
      const tempoQuestaoSpan = document.querySelector(".left-info div");
      tempoQuestaoSpan.innerHTML = `<strong>Tempo nesta questÃ£o:</strong> ${formatarTempo(tempoQuestaoAtual)}`;
  
      intervaloTempoQuestao = setInterval(() => {
        tempoQuestaoAtual++;
        localStorage.setItem(`tempo_questao_${questaoAtual}`, tempoQuestaoAtual);
        tempoQuestaoSpan.innerHTML = `<strong>Tempo nesta questÃ£o:</strong> ${formatarTempo(tempoQuestaoAtual)}`;
      }, 1000);
    }
  
    function responder() {
      const selecionado = document.querySelector('input[name="opcao"]:checked');
      if (!selecionado) {
        alert("Selecione uma alternativa.");
        return;
      }
  
      const valor = selecionado.value;
      localStorage.setItem(`resposta_${questaoAtual}`, valor);
  
      respondidas.add(questaoAtual);
      document.getElementById("respondidas").innerText = respondidas.size;
  
      alert("Resposta salva!");
    }
  
    function limparResposta() {
      localStorage.removeItem(`resposta_${questaoAtual}`);
      const radios = document.querySelectorAll('input[name="opcao"]');
      radios.forEach(r => r.checked = false);
      document.querySelectorAll('.options label').forEach(l => l.classList.remove('selected'));
      respondidas.delete(questaoAtual);
      document.getElementById("respondidas").innerText = respondidas.size;
    }
  
    function proximaQuestao() {
      if (questaoAtual < questoes.length - 1) {
        questaoAtual++;
        carregarQuestao();
      }
    }
  
    function voltarQuestao() {
      if (questaoAtual > 0) {
        questaoAtual--;
        carregarQuestao();
      }
    }
  
    function irParaQuestao(indice) {
      questaoAtual = parseInt(indice);
      carregarQuestao();
    }
  
    function finalizar() {
      clearInterval(intervaloTempoGlobal);
      clearInterval(intervaloTempoQuestao);
      alert("Prova finalizada. Redirecionando para feedback...");
      window.location.href = "feedback-questoes.html";
    }
  
    iniciarTemporizadorGlobal();
    carregarQuestao();
  </script>
</body>
</html>